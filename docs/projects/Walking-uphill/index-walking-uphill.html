<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="DTK">
<meta name="dcterms.date" content="2025-04-15">

<title>Walking uphill ‚Äì MOSAIC Calc 2025</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-d045e70ebd9269c25e164ecdb4898f56.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="../../site_libs/quarto-contrib/live-runtime/live-runtime.js" type="module"></script>
<link href="../../site_libs/quarto-contrib/live-runtime/live-runtime.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script type="module" src="../../site_libs/quarto-ojs/quarto-ojs-runtime.js"></script>
<link href="../../site_libs/quarto-ojs/quarto-ojs.css" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">MOSAIC Calc 2025</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../mosaic.html"> 
<span class="menu-text">Mosaic?</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../basics.html"> 
<span class="menu-text">Basics</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../notes.html"> 
<span class="menu-text">Class notes</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../assignments.html"> 
<span class="menu-text">Assignments</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../projects.html"> 
<span class="menu-text">Projects</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#modeling-framework" id="toc-modeling-framework" class="nav-link active" data-scroll-target="#modeling-framework">Modeling framework</a></li>
  <li><a href="#energy-used" id="toc-energy-used" class="nav-link" data-scroll-target="#energy-used">Energy used</a></li>
  <li><a href="#applying-the-geometry" id="toc-applying-the-geometry" class="nav-link" data-scroll-target="#applying-the-geometry">Applying the geometry</a></li>
  <li><a href="#extension-mini-projects" id="toc-extension-mini-projects" class="nav-link" data-scroll-target="#extension-mini-projects">Extension mini-projects</a></li>
  <li><a href="#interpreting-the-optimal-grade" id="toc-interpreting-the-optimal-grade" class="nav-link" data-scroll-target="#interpreting-the-optimal-grade">Interpreting the optimal grade</a></li>
  <li><a href="#communicating-your-result" id="toc-communicating-your-result" class="nav-link" data-scroll-target="#communicating-your-result">Communicating your result</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Walking uphill</h1>
  <div class="quarto-categories">
    <div class="quarto-category">Preliminaries</div>
    <div class="quarto-category">physiology</div>
  </div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>DTK </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">April 15, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p>In this project we‚Äôll model the energy consumption of walking uphill. We will parameterize the walk as having distance <span class="math inline">\(d\)</span> at grade (slope) <span class="math inline">\(g\)</span>. Our goal is to determine whether there is an optimal grade that minimizes energy consumption per altitude gained. You‚Äôll translate your results into a recommendation to the National Park Service for designing challenging (but not too challenging!) hiking paths through a hilly terrain to reach a scenic viewpoint at the top of a hill or the crest of a ridge. Alternatively, you might want to set criteria for rating a given trial: accumulate the energy consumed in following the trail. Finally, you‚Äôll illustrate your findings by drawing an example of a suitable route for a path.</p>
<section id="modeling-framework" class="level2">
<h2 class="anchored" data-anchor-id="modeling-framework">Modeling framework</h2>
<p><a href="#fig-simple-terrain" class="quarto-xref">Figure&nbsp;1</a> shows part of a hillside in the form of a contour graph.</p>
<div id="fig-simple-terrain" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-simple-terrain-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index-walking-uphill_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>A simple terrain near the top of a generic hill. The red vectors show the gradient of the function at the point marked by the root of the vector.</p>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-simple-terrain-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: The small blue rectangle shows how <a href="#fig-model-hillside" class="quarto-xref">Figure&nbsp;2</a> fits in as a small part of a larger landscape.
</figcaption>
</figure>
</div>
<p>As simple as <a href="#fig-simple-terrain" class="quarto-xref">Figure&nbsp;1</a> is, we‚Äôre going to simplify it even more in order to set up some terminology. One of the key strategies in calculus is to simplify a more complex picture by zooming in on a small part of the picture. In <a href="#fig-simple-terrain" class="quarto-xref">Figure&nbsp;1</a>, there is a small blue rectangle. We‚Äôre going to zoom in on this, drawing it as <a href="#fig-model-hillside" class="quarto-xref">Figure&nbsp;2</a>.</p>
<div id="fig-model-hillside" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-model-hillside-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="www/Brilleslyper-Fig-3.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-model-hillside-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2: The basic geometry of the framework. Think of this picture as forming a tiny bit of the larger landscape in <a href="#fig-simple-terrain" class="quarto-xref">Figure&nbsp;1</a>.
</figcaption>
</figure>
</div>
<p>The small blue region in <a href="#fig-simple-terrain" class="quarto-xref">Figure&nbsp;1</a> is bounded by two vectors, one drawn with red ink and the other with black. The red vector is the gradient at the corner of the blue region. The black vector runs along the contour. That is, the black and red vectors are orthogonal.</p>
<p>We will set the coordinate system of our model based on that pair of orthogonal vectors. The <span class="math inline">\(y\)</span> coordinate in <a href="#fig-model-hillside" class="quarto-xref">Figure&nbsp;2</a> corresponds to the steepest uphill direction, the <span class="math inline">\(x\)</span> coordinate is orthogonal. We will use <span class="math inline">\(z\)</span> to indicate the elevation of any point.</p>
<p>Distances <span class="math inline">\(a\)</span> and <span class="math inline">\(b\)</span> in <a href="#fig-model-hillside" class="quarto-xref">Figure&nbsp;2</a> define a delimited plane. The hiker is going to walk along the diagonal <span class="math inline">\(d\)</span> of the delimited plane. That will place the hiker at elevation <span class="math inline">\(c\)</span> relative to the starting point.</p>
<p>The grade of the inclined plane, going in the steepest direction, is <span class="math inline">\(c/b\)</span>, where <span class="math inline">\(c\)</span> is the height of the top of the inclined plane, and <span class="math inline">\(b\)</span> is the <span class="math inline">\(y\)</span>-coordinate of the top. A person desiring to find a shallower grade can walk obliquely, as in path <span class="math inline">\(d\)</span>. The red dashed line shows the route of this path on the <span class="math inline">\(x,y\)</span>-plane, the the person is also ascending as they go up the path. So, starting with coordinate <span class="math inline">\((x=0, y=0, z=0)\)</span>, the person walking up path d will end up at coordinate <span class="math inline">\((x=a, y=b, z=c)\)</span>. Thus, the length of path d will be <span class="math inline">\(\sqrt{a^2 + b^2 + c^2}\)</span>.</p>
<p>The grade of path d is the vertical distance divided by the horizontal distance (that is, the distance in the <span class="math inline">\(x,y\)</span>-plane). This distance is <span class="math inline">\(\sqrt{a^2 + b^2}\)</span>, so the grade of path d is <span class="math inline">\(g_{path} = c / \sqrt{a^2 + b^2}\)</span>.</p>
</section>
<section id="energy-used" class="level2">
<h2 class="anchored" data-anchor-id="energy-used">Energy used</h2>
<p>The energetics of human locomotion has been studied extensively by exercise physiologists. The literature is substantial, but here are three sources to inform your model.</p>
<ol type="i">
<li><p>Alberto Minetti <em>et al.</em>, (2002) ‚ÄúEnergy cost of walking and running at extreme uphill and downhill slopes‚Äù <em>J Appl Physiol</em> <strong>93</strong>:1039‚Äì1046 <a href="www/minetti-et-al-2002-energy-cost-of-walking-and-running-at-extreme-uphill-and-downhill-slopes.pdf">link</a>. See their Figure 1 and note that the ‚Äúm‚Äù in the units of the vertical axis refers to <em>meters</em> and not minutes.</p></li>
<li><p>Lindsay W. Ludlow and Peter G. Weyand (2016) ‚ÄúEnergy expenditure during level human walking: seeking a simple and accurate predictive solution‚Äù <em>J Appl Physiol</em> <strong>120</strong>: 481‚Äì494 <a href="www/ludlow-weyand-2016-energy-expenditure-during-level-human-walking-seeking-a-simple-and-accurate-predictive-solution.pdf">link</a> They propose a model of power consumed when walking at velocity <span class="math inline">\(V\)</span> on a grade <span class="math inline">\(g\)</span> for a person of height <span class="math inline">\(h\)</span> that appears to be quite close to the experimental data: <span class="math display">\[P = P_\text{resting} + 3.8 + 6.1 \frac{V^2}{h}\ .\]</span> See Figure 3E and F.</p></li>
<li><p>The American College of Sports Medicine (ACSM) ‚ÄúGuidelines for Exercise Testing and Prescription‚Äù (behind a paywall) gives a straightforward formula which, for compatibility with (i) and (ii) we will translate to the form of metabolic <strong>power</strong> consumed in walking: <span class="math display">\[P = (h + w g_{path}) V\]</span>, where <span class="math inline">\(P\)</span> is power and <span class="math inline">\(V\)</span> is velocity. The parameters <span class="math inline">\(h\)</span> and <span class="math inline">\(w\)</span> have values near <span class="math inline">\(h=0.1\)</span> and <span class="math inline">\(w=1.8\)</span>. (No units are given for <span class="math inline">\(h\)</span> and <span class="math inline">\(w\)</span>, although their physical u-dimensionality is easily found from the formula.) Figures 3A and B in Ludlow shows the ACSM model compared to experimentally measured power consumption.</p></li>
</ol>
<p>For simplicity, we‚Äôll work through the consequences the ACSM model</p>
<ol type="1">
<li>What is the dimension of <span class="math inline">\(g\)</span>?</li>
</ol>
<div class="cell" data-show_hints="true" data-inline="true">
<span> <small style="color: grey;" id="walking-uphill-1-hintarea" class="hintarea">walking-uphill-1</small>
<form id="walking-uphill-1-form">
<span> <span> <input type="radio" class="devoirs-mcq" value="dimensionless" id="walking-uphill-1-1" w="16" name="walking-uphill-1" hint="Spot on!" show_hints="TRUE"> dimensionless &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <input type="radio" class="devoirs-mcq" value="$L$" id="walking-uphill-1-2" w="19" name="walking-uphill-1" hint="$g$ is a ratio of two lengths." show_hints="TRUE"> <span class="math inline">\(L\)</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <input type="radio" class="devoirs-mcq" value="$L^2$" id="walking-uphill-1-3" w="87" name="walking-uphill-1" hint="$g$ is a ratio, not a product." show_hints="TRUE"> <span class="math inline">\(L^2\)</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <input type="radio" class="devoirs-mcq" value="$LT$" id="walking-uphill-1-4" w="87" name="walking-uphill-1" hint="Score!" show_hints="TRUE"> <span class="math inline">\(LT\)</span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <input type="radio" class="devoirs-mcq" name="walking-uphill-1" id="walking-uphill-1.null" style="display: none;" w="skipped" checked=""> </span> </span>
</form>
<script type="text/javascript">
document.addEventListener('DOMContentLoaded', function() {
      console.log('Adding event listener for walking-uphill-1.');
      const form = document.getElementById('walking-uphill-1-form');
      const radioButtons = form.querySelectorAll('input[type="radio"]');

      // Load saved value on page load
      const savedValue = localStorage.getItem('walking-uphill-1-choice');
      if (savedValue) {
        console.log("Restoring radio button values for walking-uphill-1.");
        radioButtons.forEach(radio => {
          if (radio.value === savedValue) {
            radio.checked = true;
          }
        });
      }

      // Save value on change
      form.addEventListener('change', function(event) {
        if (event.target.type === 'radio') {
          console.log("Saving changed value for walking-uphill-1.");
          localStorage.setItem('walking-uphill-1-choice', event.target.value);
        }
      });
    });
</script>
<p></p>
</span></div>
<ol start="2" type="1">
<li>What is the dimension of <span class="math inline">\(E/d\)</span>?</li>
</ol>
<div class="cell" data-show_hints="true">
<span> <small style="color: grey;" id="walking-uphill-2-hintarea" class="hintarea">walking-uphill-2</small>
<form id="walking-uphill-2-form">
<p>
</p><p><input type="radio" class="devoirs-mcq" value="$MLT^{-2}$" id="walking-uphill-2-1" w="8" name="walking-uphill-2" hint="A win!" show_hints="TRUE"> <span class="math inline">\(MLT^{-2}\)</span></p>
<p></p>
<p>
</p><p><input type="radio" class="devoirs-mcq" value="$ML^2T^{-2}$" id="walking-uphill-2-2" w="7" name="walking-uphill-2" hint="This is the dimension of energy." show_hints="TRUE"> <span class="math inline">\(ML^2T^{-2}\)</span></p>
<p></p>
<p>
</p><p><input type="radio" class="devoirs-mcq" value="$M^2 L^2 T^2$" id="walking-uphill-2-3" w="7" name="walking-uphill-2" hint="Remember, energy is mass times acceleration times length." show_hints="TRUE"> <span class="math inline">\(M^2 L^2 T^2\)</span></p>
<p></p>
<p>
</p><p><input type="radio" class="devoirs-mcq" value="$M L^2 T^2$" id="walking-uphill-2-4" w="32" name="walking-uphill-2" hint="Energy is length times force. Force is mass times acceleration. Acceleration is length per time-squared." show_hints="TRUE"> <span class="math inline">\(M L^2 T^2\)</span></p>
<p></p>
<input type="radio" class="devoirs-mcq" name="walking-uphill-2" id="walking-uphill-2.null" style="display: none;" w="skipped" checked="">
</form>
<script type="text/javascript">
document.addEventListener('DOMContentLoaded', function() {
      console.log('Adding event listener for walking-uphill-2.');
      const form = document.getElementById('walking-uphill-2-form');
      const radioButtons = form.querySelectorAll('input[type="radio"]');

      // Load saved value on page load
      const savedValue = localStorage.getItem('walking-uphill-2-choice');
      if (savedValue) {
        console.log("Restoring radio button values for walking-uphill-2.");
        radioButtons.forEach(radio => {
          if (radio.value === savedValue) {
            radio.checked = true;
          }
        });
      }

      // Save value on change
      form.addEventListener('change', function(event) {
        if (event.target.type === 'radio') {
          console.log("Saving changed value for walking-uphill-2.");
          localStorage.setItem('walking-uphill-2-choice', event.target.value);
        }
      });
    });
</script>
<p></p>
</span></div>
</section>
<section id="applying-the-geometry" class="level2">
<h2 class="anchored" data-anchor-id="applying-the-geometry">Applying the geometry</h2>
<p>Our goal is to find path grade <span class="math inline">\(g_{path}\)</span> that will minimize the energy used to ascend a given height. For simplicity, let‚Äôs assume that the height is 100 m.</p>
<p>Suppose the path has a grade <span class="math inline">\(g_{path}\)</span> and reaches a height of 100m. The distance <span class="math inline">\(d\)</span> in meters travelled along the path will be <span class="math inline">\(g_{path} d = 100\)</span> meters</p>
<ol start="3" type="1">
<li>If the distance travelled along the path (solid red line in Figure 1) is <span class="math inline">\(d\)</span> meters, what is the length of the <em>horizontal</em> trace of the path (the dashed red line in <a href="#fig-model-hillside" class="quarto-xref">Figure&nbsp;2</a>), given that the change in height is 100 meters?</li>
</ol>
<div class="cell" data-show_hints="false">
<span> <small style="color: grey;" id="walking-uphill-3-hintarea" class="hintarea">walking-uphill-3</small>
<form id="walking-uphill-3-form">
<p>
</p><p><input type="radio" class="devoirs-mcq" value="$\sqrt{d^2 ...  - 100^2}$" id="walking-uphill-3-1" w="20" name="walking-uphill-3" hint="You're right." show_hints="FALSE"> <span class="math inline">\(\sqrt{d^2 - 100^2}\)</span></p>
<p></p>
<p>
</p><p><input type="radio" class="devoirs-mcq" value="$\sqrt{d^2 ...  + 100^2}$" id="walking-uphill-3-2" w="32" name="walking-uphill-3" hint="Shouldn't the dashed line be shorter than the solid line?" show_hints="FALSE"> <span class="math inline">\(\sqrt{d^2 + 100^2}\)</span></p>
<p></p>
<p>
</p><p><input type="radio" class="devoirs-mcq" value="$d$" id="walking-uphill-3-3" w="19" name="walking-uphill-3" hint="If you're climbing 100 meters along the red line, it must be longer than the dashed line." show_hints="FALSE"> <span class="math inline">\(d\)</span></p>
<p></p>
<p>
</p><p><input type="radio" class="devoirs-mcq" value="Need addit ... formation " id="walking-uphill-3-4" w="32" name="walking-uphill-3" hint="Sorry!" show_hints="FALSE"> Need additional information</p>
<p></p>
<input type="radio" class="devoirs-mcq" name="walking-uphill-3" id="walking-uphill-3.null" style="display: none;" w="skipped" checked="">
</form>
<script type="text/javascript">
document.addEventListener('DOMContentLoaded', function() {
      console.log('Adding event listener for walking-uphill-3.');
      const form = document.getElementById('walking-uphill-3-form');
      const radioButtons = form.querySelectorAll('input[type="radio"]');

      // Load saved value on page load
      const savedValue = localStorage.getItem('walking-uphill-3-choice');
      if (savedValue) {
        console.log("Restoring radio button values for walking-uphill-3.");
        radioButtons.forEach(radio => {
          if (radio.value === savedValue) {
            radio.checked = true;
          }
        });
      }

      // Save value on change
      form.addEventListener('change', function(event) {
        if (event.target.type === 'radio') {
          console.log("Saving changed value for walking-uphill-3.");
          localStorage.setItem('walking-uphill-3-choice', event.target.value);
        }
      });
    });
</script>
<p></p>
</span></div>
<ol start="4" type="1">
<li>What is the grade of the path when the length of the path <span class="math inline">\(d\)</span> meters?</li>
</ol>
<div class="cell" data-show_hints="false">
<span> <small style="color: grey;" id="walking-uphill-4-hintarea" class="hintarea">walking-uphill-4</small>
<form id="walking-uphill-4-form">
<p>
</p><p><input type="radio" class="devoirs-mcq" value="$g(d) \equ ...  - 100^2}$" id="walking-uphill-4-1" w="29" name="walking-uphill-4" hint="Yes." show_hints="FALSE"> <span class="math inline">\(g(d) \equiv 100 / \sqrt{d^2 - 100^2}\)</span></p>
<p></p>
<p>
</p><p><input type="radio" class="devoirs-mcq" value="$g(d) \equ ... sqrt{d^2}$" id="walking-uphill-4-2" w="3" name="walking-uphill-4" hint="Grade is rise over run. The run is always measured horizontally." show_hints="FALSE"> <span class="math inline">\(g(d) \equiv 100 / \sqrt{d^2}\)</span></p>
<p></p>
<p>
</p><p><input type="radio" class="devoirs-mcq" value="$g(d) \equ ... 00} / 100$" id="walking-uphill-4-3" w="3" name="walking-uphill-4" hint="Grade is rise over run, not the other way around." show_hints="FALSE"> <span class="math inline">\(g(d) \equiv \sqrt{d^2 - 100} / 100\)</span></p>
<p></p>
<p>
</p><p><input type="radio" class="devoirs-mcq" value="$100^2 / ( ...  - 100^2)$" id="walking-uphill-4-4" w="32" name="walking-uphill-4" hint="Almost. This is the square of the grade." show_hints="FALSE"> <span class="math inline">\(100^2 / (d^2 - 100^2)\)</span></p>
<p></p>
<input type="radio" class="devoirs-mcq" name="walking-uphill-4" id="walking-uphill-4.null" style="display: none;" w="skipped" checked="">
</form>
<script type="text/javascript">
document.addEventListener('DOMContentLoaded', function() {
      console.log('Adding event listener for walking-uphill-4.');
      const form = document.getElementById('walking-uphill-4-form');
      const radioButtons = form.querySelectorAll('input[type="radio"]');

      // Load saved value on page load
      const savedValue = localStorage.getItem('walking-uphill-4-choice');
      if (savedValue) {
        console.log("Restoring radio button values for walking-uphill-4.");
        radioButtons.forEach(radio => {
          if (radio.value === savedValue) {
            radio.checked = true;
          }
        });
      }

      // Save value on change
      form.addEventListener('change', function(event) {
        if (event.target.type === 'radio') {
          console.log("Saving changed value for walking-uphill-4.");
          localStorage.setItem('walking-uphill-4-choice', event.target.value);
        }
      });
    });
</script>
<p></p>
</span></div>
<p>According to the ACSM formula, the energy consumed in gaining an altitude of 100m over a path of length <span class="math inline">\(d\)</span> is <span class="math display">\[E(g, d) = (h + v g)d\]</span></p>
<p>Since we have a formula for the grade as a function of distance, <span class="math inline">\(g(d)\)</span>, we can re-write the ACSM energy formula as a function only of <span class="math inline">\(d\)</span>. Find that formula for <span class="math inline">\(E(d)\)</span> and then program it as the function <code>Energy()</code> in the sandbox. Then make a plot of <code>Energy(d)</code> and locate the extremum by reading the graph. (You may have to zoom in on the domain. And remember, since the vertical climb is 100 meters, the shortest possible <span class="math inline">\(d\)</span> is‚Äîstraight up the cliff!‚Äî100 meters.)</p>
<div id="lst-digital-37-sandbox1" class="listing quarto-float quarto-figure quarto-figure-left anchored">
<figure class="quarto-float quarto-float-lst figure">
<figcaption class="quarto-float-caption-top quarto-float-caption quarto-float-lst quarto-uncaptioned" id="lst-digital-37-sandbox1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Listing&nbsp;1
</figcaption>
<div aria-describedby="lst-digital-37-sandbox1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div>
<div id="webr-1" class="exercise-cell">

</div>
<script type="webr-1-contents">
eyJhdHRyIjp7ImVkaXQiOnRydWUsImV2YWwiOnRydWV9LCJjb2RlIjoiRW5lcmd5IDwtIG1ha2VGdW4oIF95b3VyX2V4cHJlc3Npb25faGVyZV8gICB+IGQpXG5zbGljZV9wbG90KEVuZXJneShkLCB2PTEuOCwgaD0wLjEpIH4gZCwgXG4gICAgICAgICAgIGRvbWFpbihkID0gX21pbl9oZXJlXyA6ICBfbWF4X2hlcmVfKSkpIn0=
</script>
</div>
</div>
</figure>
</div>
<p>It‚Äôs a little easier to find the argmin of <span class="math inline">\(d\)</span> by calculating the derivative of <code>Energy()</code> with respect to <code>d</code> and looking for a zero crossing. Try that.</p>
</section>
<section id="extension-mini-projects" class="level2">
<h2 class="anchored" data-anchor-id="extension-mini-projects">Extension mini-projects</h2>
<ol type="1">
<li><p>Do the optimization using the Ludlow formula. Does the optimal grade depend substantially on the person‚Äôs height <span class="math inline">\(h\)</span>?</p></li>
<li><p>Minetti <em>et al.</em> give a formula for the energy cost (per meter gain in elevation) of walking uphill at gradient <span class="math inline">\(g\)</span></p></li>
</ol>
<p><span class="math display">\[C_w(g) \equiv 280.5\ g^5 - 58.7\ g^4 - 76.8\ g^3 + 51.9\ g^2 + 19.6\ g + 2.5\]</span> Perform the optimization using this formula. Note that the energy cost is denominated in terms of ‚Äúper 1 meter gain‚Äù in elevation, so you will need to relate <span class="math inline">\(g\)</span> and <span class="math inline">\(d\)</span> to the elevation gain. (Note that the model form is a 5th-order polynomial! Could a piecewise linear model have been used to the same effect? Are there wiggles in the polynomial model.</p>
<!--
## Optimization by differentiation

DO WE WANT THEM TO DO SOME WORK ON PAPER, algebraically?

THE FOLLOWING IS FROM YOUR initial outline of the project:

For this model we can ask what grade should you select to gain say 100m of altitude while using the minimum amount of energy. A way to approach this problem is to define energy cost in terms of the run (we know the rise is 100). In this scenario the distance becomes ‚àöùë•2+1002. Hence we get energy as a function of the run: ùê∏(ùë•)=(0.1+1.8‚ãÖ100ùë•)‚àöùë•2+1002.

Having them develop this model is important. Once they do, there are lots of possible questions:

1. Develop the model above

2. What is ùëëùë•ùê∏(ùë•)

3. Where does the minimum occur?

4. What grade should we use?

5. How sensitive is the answer to the values of ‚Ñé and ùë£?

6. If solved algebraically, the optimal grade is ùëî=‚àö‚Ñéùë£3. For the ACSM values this gives about 0.38.

7. There are lots of hidden assumptions in the values of ‚Ñé and ùë£. These are for walking a comfortable speed and I think it assumes the walker can take in fuel to maintain this speed for any grade for as long as needed.

-->
</section>
<section id="interpreting-the-optimal-grade" class="level2">
<h2 class="anchored" data-anchor-id="interpreting-the-optimal-grade">Interpreting the optimal grade</h2>
<p>By solving the minimization problem, you have found the <em>optimal</em> grade. In communicating your result, you should place it in context. For instance ‚Ä¶</p>
<ul>
<li>The ACSM values of <span class="math inline">\(h=0.1\)</span> and <span class="math inline">\(v=1.8\)</span> are <em>estimates</em>. Presumably there is some variation from one person to another as well as uncertainty in the estimate itself.</li>
<li>The minimum might be <em>sharp</em> or <em>broad</em>. This is a question of how much changing the input value changes the output value.</li>
</ul>
<p>How to take these matters into account when giving your recommendation for an optimal grade? Here are some ideas.</p>
<p>The ACSM is the American College of <strong>Sports</strong> Medicine. Presumably the people they studied are athletes, not necessarily typical visitors to a national part.</p>
<blockquote class="blockquote">
<p><em>Do you think a typical park visitor would have larger or smaller <span class="math inline">\(v\)</span> than an athlete? It‚Äôs reasonable to think that <span class="math inline">\(v\)</span> might be different by a factor of 3 in non-athletes. How does such a change in <span class="math inline">\(v\)</span> change the argmin grade and the min of the energy?</em></p>
</blockquote>
<script type="text/javascript">
      //save entered info
      document.addEventListener('DOMContentLoaded', function() {
      console.log('Adding event listener for walking-uphill-essay-2.');
      const form = document.getElementById('walking-uphill-essay-2');
      form.addEventListener("input", function () {
        var todo = document.getElementById('walking-uphill-essay-2').value;
        localStorage.setItem("walking-uphill-essay-2-contents", todo);
        console.log("Saving value of walking-uphill-essay-2.")
      }, false);

      //on page load, read in the old value
      const savedValue = localStorage.getItem("walking-uphill-essay-2-contents");
      if (savedValue) {
        document.getElementById('walking-uphill-essay-2').value = savedValue;
      }
})
</script>
<textarea id="walking-uphill-essay-2" name="walking-uphill-essay-2" class="devoirs-text" style="font-family: monospace, monospace;" rows="4" cols="50" placeholder="Type here. (ID walking-uphill-essay-2)"></textarea>
<p>It may not be important to operate exactly at the argmin. What‚Äôs important is that the energy expended not be crazy bad.</p>
<blockquote class="blockquote">
<p><em>One way to think about how acceptable is a grade is to think about how sensitive the <strong>output</strong> of the energy function is to a change in grade. Pick some percentage change that you regard as hardly likely to be noticed by a park visitor. (Give some justification for your selected percentage, but of course there is no exact right choice.) Translate your percentage into a range of distances <span class="math inline">\(d\)</span> that is consistent with a change in output less than your percentage. Then convert the range in <span class="math inline">\(d\)</span> to a range in <span class="math inline">\(g\)</span>.</em></p>
</blockquote>
<script type="text/javascript">
      //save entered info
      document.addEventListener('DOMContentLoaded', function() {
      console.log('Adding event listener for walking-uphill-essay-3.');
      const form = document.getElementById('walking-uphill-essay-3');
      form.addEventListener("input", function () {
        var todo = document.getElementById('walking-uphill-essay-3').value;
        localStorage.setItem("walking-uphill-essay-3-contents", todo);
        console.log("Saving value of walking-uphill-essay-3.")
      }, false);

      //on page load, read in the old value
      const savedValue = localStorage.getItem("walking-uphill-essay-3-contents");
      if (savedValue) {
        document.getElementById('walking-uphill-essay-3').value = savedValue;
      }
})
</script>
<textarea id="walking-uphill-essay-3" name="walking-uphill-essay-3" class="devoirs-text" style="font-family: monospace, monospace;" rows="4" cols="50" placeholder="Type here. (ID walking-uphill-essay-3)"></textarea>
</section>
<section id="communicating-your-result" class="level2">
<h2 class="anchored" data-anchor-id="communicating-your-result">Communicating your result</h2>
<p>Consider three levels of communication:</p>
<ol type="1">
<li>You report the argmin grade <span class="math inline">\(g\)</span> only. This provides the reader of your report with no context. Must the grade be exactly that? Try to avoid such narrow communication.</li>
<li>You report a range of acceptable grades. This way if the path designer runs into some problem with a particular path, he or she can consider reasonable alternatives.</li>
<li>You report (2), but you also translate that into terms that will be comfortable for a decision-maker who is not mathematically trained. (You might be surprised how many well-educated people do not assimilate percentages well.)</li>
</ol>
<p>One way to help people visualize your recommended grade ‚Ä¶ Pick a few real-world examples of paths, both steep and shallow. For example, there‚Äôs the Manitou incline near Colorado Springs as an example of a steep hike. Heartbreak Hill in the Boston Marathon has earned its name. Another example, pick a couple of streets in San Francisco, perhaps one with a cable-car running along it.</p>
<blockquote class="blockquote">
<p><em>Report your results in the form of a table showing your recommendations alongside the real-world examples.</em></p>
</blockquote>
<ol start="2" type="a">
<li>Draw some example paths on a real terrain. To support you in this task, here is a <a href="www/hill.png">contour map of some imagined parkland</a>. The contours are spaced 10 meters apart vertically and the axes give (horizontal) distance in meters.</li>
</ol>
<p>Translate the upper and lower bounds of your grade interval (as in (2)) into a number of meters you must walk horizontally to go from one contour to the next. For instance, suppose your grade interval translate into 50 meters to 75 meters horizontally. (But use your own grade interval.)</p>
<p>Mark off on a ruler the horizontal distance that must be covered in going from one contour to another. (The red vertical bar in the top left is 50 meters long, the blue is 30 meters.) Then, from the starting point of the path, use that horizontal distance to connect to the next highest contour. Continue on from there, one contour at a time. If you find that the horizontal distance isn‚Äôt sufficient to reach the next contour, then your grade will be shallower than the most efficient one. So be it.</p>
<p>After printing out <a href="www/map.png">this imagined map</a> use the method in the previous paragraph to draw a path connecting the starting point for the path to the scenic outlook at the top of the hill at a grade that is as close as you can get to the bottom bound on efficient grade that you found. Then draw another path at the top bound for efficient grade. Hand in your maps.</p>
<div id="fig-map-to-draw-on" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-map-to-draw-on-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>Warning: All aesthetics have length 1, but the data has 10000 rows.
‚Ñπ Please consider using `annotate()` or provide this layer with data containing
  a single row.
All aesthetics have length 1, but the data has 10000 rows.
‚Ñπ Please consider using `annotate()` or provide this layer with data containing
  a single row.
All aesthetics have length 1, but the data has 10000 rows.
‚Ñπ Please consider using `annotate()` or provide this layer with data containing
  a single row.
All aesthetics have length 1, but the data has 10000 rows.
‚Ñπ Please consider using `annotate()` or provide this layer with data containing
  a single row.
All aesthetics have length 1, but the data has 10000 rows.
‚Ñπ Please consider using `annotate()` or provide this layer with data containing
  a single row.</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index-walking-uphill_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-map-to-draw-on-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3: The terrain on which to draw paths between the start and the point at the top of the hill. <a href="www/hill.pdf">PDF version for printing</a>
</figcaption>
</figure>
</div>


<script type="webr-data">
eyJvcHRpb25zIjp7ImJhc2VVcmwiOiJodHRwczovL3dlYnIuci13YXNtLm9yZy92MC40LjIvIn0sInBhY2thZ2VzIjp7InBrZ3MiOlsiZXZhbHVhdGUiLCJrbml0ciIsImh0bWx0b29scyIsIm1vc2FpY0NhbGMiLCJnZ3Bsb3QyIiwiZ2dmb3JtdWxhIl0sInJlcG9zIjpbImh0dHBzOi8vZHRrYXBsYW4uci11bml2ZXJzZS5kZXYiXX0sInJlbmRlcl9kZiI6ImRlZmF1bHQifQ==
</script>
<script type="ojs-module-contents">
eyJjb250ZW50cyI6W3siY2VsbE5hbWUiOiJ3ZWJyLXdpZGdldC0xIiwiaW5saW5lIjpmYWxzZSwibWV0aG9kTmFtZSI6ImludGVycHJldFF1aWV0Iiwic291cmNlIjoie1xuICAvLyBXYWl0IGZvciBvdXRwdXQgdG8gYmUgd3JpdHRlbiB0byB0aGUgRE9NLCB0aGVuIHRyaWdnZXIgd2lkZ2V0IHJlbmRlcmluZ1xuICBhd2FpdCBfd2Vicl92YWx1ZV8xO1xuICBpZiAod2luZG93LkhUTUxXaWRnZXRzKSB7XG4gICAgd2luZG93LkhUTUxXaWRnZXRzLnN0YXRpY1JlbmRlcigpO1xuICB9XG4gIGlmICh3aW5kb3cuUGFnZWRUYWJsZURvYykge1xuICAgIHdpbmRvdy5QYWdlZFRhYmxlRG9jLmluaXRBbGwoKTtcbiAgfVxufVxuIn0seyJjZWxsTmFtZSI6IndlYnItMSIsImlubGluZSI6ZmFsc2UsIm1ldGhvZE5hbWUiOiJpbnRlcnByZXQiLCJzb3VyY2UiOiJ2aWV3b2YgX3dlYnJfZWRpdG9yXzEgPSB7XG4gIGNvbnN0IHsgV2ViUkV4ZXJjaXNlRWRpdG9yLCBiNjREZWNvZGUgfSA9IHdpbmRvdy5fZXhlcmNpc2Vfb2pzX3J1bnRpbWU7XG4gIGNvbnN0IHNjcmlwdENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwid2Vici0xLWNvbnRlbnRzXFxcIl1gKS50ZXh0Q29udGVudDtcbiAgY29uc3QgYmxvY2sgPSBKU09OLnBhcnNlKGI2NERlY29kZShzY3JpcHRDb250ZW50KSk7XG5cbiAgY29uc3Qgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24oeyBpZDogYHdlYnItMS1jb250ZW50c2AgfSwgYmxvY2suYXR0cik7XG4gIGNvbnN0IGVkaXRvciA9IG5ldyBXZWJSRXhlcmNpc2VFZGl0b3Iod2ViUk9qcy53ZWJSUHJvbWlzZSwgYmxvY2suY29kZSwgb3B0aW9ucyk7XG5cbiAgcmV0dXJuIGVkaXRvci5jb250YWluZXI7XG59XG5fd2Vicl92YWx1ZV8xID0gd2ViUk9qcy5wcm9jZXNzKF93ZWJyX2VkaXRvcl8xLCB7fSk7XG4ifSx7ImNlbGxOYW1lIjoid2Vici1wcmVsdWRlIiwiaW5saW5lIjpmYWxzZSwibWV0aG9kTmFtZSI6ImludGVycHJldFF1aWV0Iiwic291cmNlIjoid2ViUk9qcyA9IHtcbiAgY29uc3QgeyBXZWJSLCBDaGFubmVsVHlwZSB9ID0gd2luZG93Ll9leGVyY2lzZV9vanNfcnVudGltZS5XZWJSO1xuICBjb25zdCB7XG4gICAgV2ViUkV2YWx1YXRvcixcbiAgICBXZWJSRW52aXJvbm1lbnRNYW5hZ2VyLFxuICAgIHNldHVwUixcbiAgICBiNjREZWNvZGUsXG4gICAgY29sbGFwc2VQYXRoXG4gIH0gPSB3aW5kb3cuX2V4ZXJjaXNlX29qc19ydW50aW1lO1xuXG4gIGNvbnN0IHN0YXR1c0NvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZXhlcmNpc2UtbG9hZGluZy1zdGF0dXNcIik7XG4gIGNvbnN0IGluZGljYXRvckNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZXhlcmNpc2UtbG9hZGluZy1pbmRpY2F0b3JcIik7XG4gIGluZGljYXRvckNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKFwiZC1ub25lXCIpO1xuXG4gIGxldCBzdGF0dXNUZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKVxuICBzdGF0dXNUZXh0LmNsYXNzTGlzdCA9IFwiZXhlcmNpc2UtbG9hZGluZy1kZXRhaWxzXCI7XG4gIHN0YXR1c1RleHQgPSBzdGF0dXNDb250YWluZXIuYXBwZW5kQ2hpbGQoc3RhdHVzVGV4dCk7XG4gIHN0YXR1c1RleHQudGV4dENvbnRlbnQgPSBgSW5pdGlhbGlzZWA7XG5cbiAgLy8gSG9pc3QgaW5kaWNhdG9yIG91dCBmcm9tIGZpbmFsIHNsaWRlIHdoZW4gcnVubmluZyB1bmRlciByZXZlYWxcbiAgY29uc3QgcmV2ZWFsU3RhdHVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5yZXZlYWwgLmV4ZXJjaXNlLWxvYWRpbmctaW5kaWNhdG9yXCIpO1xuICBpZiAocmV2ZWFsU3RhdHVzKSB7XG4gICAgcmV2ZWFsU3RhdHVzLnJlbW92ZSgpO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucmV2ZWFsID4gLnNsaWRlc1wiKS5hcHBlbmRDaGlsZChyZXZlYWxTdGF0dXMpO1xuICB9XG5cbiAgLy8gTWFrZSBhbnkgcmV2ZWFsIHNsaWRlcyB3aXRoIGxpdmUgY2VsbHMgc2Nyb2xsYWJsZVxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnJldmVhbCAuZXhlcmNpc2UtY2VsbFwiKS5mb3JFYWNoKChlbCkgPT4ge1xuICAgIGVsLmNsb3Nlc3QoJ3NlY3Rpb24uc2xpZGUnKS5jbGFzc0xpc3QuYWRkKFwic2Nyb2xsYWJsZVwiKTtcbiAgfSlcblxuICAvLyB3ZWJSIHN1cHBsZW1lbnRhbCBkYXRhIGFuZCBvcHRpb25zXG4gIGNvbnN0IGRhdGFDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihgc2NyaXB0W3R5cGU9XFxcIndlYnItZGF0YVxcXCJdYCkudGV4dENvbnRlbnQ7XG4gIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKGI2NERlY29kZShkYXRhQ29udGVudCkpO1xuXG4gIC8vIEdyYWIgbGlzdCBvZiByZXNvdXJjZXMgdG8gYmUgZG93bmxvYWRlZFxuICBjb25zdCBmaWxlc0NvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBzY3JpcHRbdHlwZT1cXFwidmZzLWZpbGVcXFwiXWApLnRleHRDb250ZW50O1xuICBjb25zdCBmaWxlcyA9IEpTT04ucGFyc2UoYjY0RGVjb2RlKGZpbGVzQ29udGVudCkpO1xuXG4gIC8vIFVzZSBQb3N0TWVzc2FnZSBjaGFubmVsIGZvciBhc3luYyBjb21tdW5pY2F0aW9uXG4gIC8vIFdlIGRvIG5vdCBleHBlY3QgdG8gdGFrZSBuZXN0ZWQgcHJvbXB0IGlucHV0IGluIFF1YXJ0byBMaXZlIGNlbGxzXG4gIGRhdGEub3B0aW9ucy5jaGFubmVsVHlwZSA9IENoYW5uZWxUeXBlLlBvc3RNZXNzYWdlO1xuXG4gIC8vIEluaXRpYWxpc2Ugd2ViUiBhbmQgc2V0dXAgZm9yIFIgY29kZSBldmFsdWF0aW9uXG4gIGxldCB3ZWJSUHJvbWlzZSA9IChhc3luYyAod2ViUikgPT4ge1xuICAgIHN0YXR1c1RleHQudGV4dENvbnRlbnQgPSBgRG93bmxvYWRpbmcgd2ViUmA7XG4gICAgYXdhaXQgd2ViUi5pbml0KCk7XG5cbiAgICAvLyBJbnN0YWxsIHByb3ZpZGVkIGxpc3Qgb2YgcGFja2FnZXNcbiAgICAvLyBFbnN1cmUgd2ViUiBkZWZhdWx0IHJlcG8gaXMgaW5jbHVkZWRcbiAgICBkYXRhLnBhY2thZ2VzLnJlcG9zLnB1c2goXCJodHRwczovL3JlcG8uci13YXNtLm9yZ1wiKVxuICAgIGF3YWl0IGRhdGEucGFja2FnZXMucGtncy5tYXAoKHBrZykgPT4gKCkgPT4ge1xuICAgICAgc3RhdHVzVGV4dC50ZXh0Q29udGVudCA9IGBEb3dubG9hZGluZyBwYWNrYWdlOiAke3BrZ31gO1xuICAgICAgcmV0dXJuIHdlYlIuZXZhbFJWb2lkKGBcbiAgICAgICAgd2Vicjo6aW5zdGFsbChwa2csIHJlcG9zID0gcmVwb3MpXG4gICAgICAgIGxpYnJhcnkocGtnLCBjaGFyYWN0ZXIub25seSA9IFRSVUUpXG4gICAgICBgLCB7IGVudjoge1xuICAgICAgICBwa2c6IHBrZyxcbiAgICAgICAgcmVwb3M6IGRhdGEucGFja2FnZXMucmVwb3MsXG4gICAgICB9fSk7XG4gICAgfSkucmVkdWNlKChjdXIsIG5leHQpID0+IGN1ci50aGVuKG5leHQpLCBQcm9taXNlLnJlc29sdmUoKSk7XG5cbiAgICAvLyBEb3dubG9hZCBhbmQgaW5zdGFsbCByZXNvdXJjZXNcbiAgICBhd2FpdCBmaWxlcy5tYXAoKGZpbGUpID0+IGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG5hbWUgPSBmaWxlLnN1YnN0cmluZyhmaWxlLmxhc3RJbmRleE9mKCcvJykgKyAxKTtcbiAgICAgIHN0YXR1c1RleHQudGV4dENvbnRlbnQgPSBgRG93bmxvYWRpbmcgcmVzb3VyY2U6ICR7bmFtZX1gO1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChmaWxlKTtcbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDYW4ndCBkb3dubG9hZCBcXGAke2ZpbGV9XFxgLiBFcnJvciAke3Jlc3BvbnNlLnN0YXR1c306IFwiJHtyZXNwb25zZS5zdGF0dXNUZXh0fVwiLmApO1xuICAgICAgfVxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmFycmF5QnVmZmVyKCk7XG5cbiAgICAgIC8vIFN0b3JlIFVSTHMgaW4gdGhlIGN3ZCB3aXRob3V0IGFueSBzdWJkaXJlY3Rvcnkgc3RydWN0dXJlXG4gICAgICBpZiAoZmlsZS5pbmNsdWRlcyhcIjovL1wiKSkge1xuICAgICAgICBmaWxlID0gbmFtZTtcbiAgICAgIH1cblxuICAgICAgLy8gQ29sbGFwc2UgaGlnaGVyIGRpcmVjdG9yeSBzdHJ1Y3R1cmVcbiAgICAgIGZpbGUgPSBjb2xsYXBzZVBhdGgoZmlsZSk7XG5cbiAgICAgIC8vIENyZWF0ZSBkaXJlY3RvcnkgdHJlZSwgaWdub3JpbmcgXCJkaXJlY3RvcnkgZXhpc3RzXCIgVkZTIGVycm9yc1xuICAgICAgY29uc3QgcGFydHMgPSBmaWxlLnNwbGl0KCcvJykuc2xpY2UoMCwgLTEpO1xuICAgICAgbGV0IHBhdGggPSAnJztcbiAgICAgIHdoaWxlIChwYXJ0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHBhdGggKz0gcGFydHMuc2hpZnQoKSArICcvJztcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBhd2FpdCB3ZWJSLkZTLm1rZGlyKHBhdGgpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgaWYgKCFlLm1lc3NhZ2UuaW5jbHVkZXMoXCJGUyBlcnJvclwiKSkge1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gV3JpdGUgdGhpcyBmaWxlIHRvIHRoZSBWRlNcbiAgICAgIHJldHVybiBhd2FpdCB3ZWJSLkZTLndyaXRlRmlsZShmaWxlLCBuZXcgVWludDhBcnJheShkYXRhKSk7XG4gICAgfSkucmVkdWNlKChjdXIsIG5leHQpID0+IGN1ci50aGVuKG5leHQpLCBQcm9taXNlLnJlc29sdmUoKSk7XG5cbiAgICBzdGF0dXNUZXh0LnRleHRDb250ZW50ID0gYEluc3RhbGxpbmcgd2ViUiBzaGltc2A7XG4gICAgYXdhaXQgd2ViUi5ldmFsUlZvaWQoYHdlYnI6OnNoaW1faW5zdGFsbCgpYCk7XG5cbiAgICBzdGF0dXNUZXh0LnRleHRDb250ZW50ID0gYFdlYlIgZW52aXJvbm1lbnQgc2V0dXBgO1xuICAgIGF3YWl0IHNldHVwUih3ZWJSLCBkYXRhKTtcblxuICAgIHN0YXR1c1RleHQucmVtb3ZlKCk7XG4gICAgaWYgKHN0YXR1c0NvbnRhaW5lci5jaGlsZHJlbi5sZW5ndGggPT0gMCkge1xuICAgICAgc3RhdHVzQ29udGFpbmVyLnBhcmVudE5vZGUucmVtb3ZlKCk7XG4gICAgfVxuICAgIHJldHVybiB3ZWJSO1xuICB9KShuZXcgV2ViUihkYXRhLm9wdGlvbnMpKTtcblxuICAvLyBLZWVwIHRyYWNrIG9mIGluaXRpYWwgT0pTIGJsb2NrIHJlbmRlclxuICBjb25zdCByZW5kZXJlZE9qcyA9IHt9O1xuXG4gIGNvbnN0IHByb2Nlc3MgPSBhc3luYyAoY29udGV4dCwgaW5wdXRzKSA9PiB7XG4gICAgY29uc3Qgd2ViUiA9IGF3YWl0IHdlYlJQcm9taXNlO1xuICAgIGNvbnN0IGV2YWx1YXRvciA9IG5ldyBXZWJSRXZhbHVhdG9yKHdlYlIsIGNvbnRleHQpXG4gICAgYXdhaXQgZXZhbHVhdG9yLnByb2Nlc3MoaW5wdXRzKTtcbiAgICByZXR1cm4gZXZhbHVhdG9yLmNvbnRhaW5lcjtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgcHJvY2VzcyxcbiAgICB3ZWJSUHJvbWlzZSxcbiAgICByZW5kZXJlZE9qcyxcbiAgfTtcbn1cbiJ9XX0=
</script>
<div id="exercise-loading-indicator" class="exercise-loading-indicator d-none d-flex align-items-center gap-2">
<div id="exercise-loading-status" class="d-flex gap-2">

</div>
<div class="spinner-grow spinner-grow-sm">

</div>
</div>
<script type="vfs-file">
W10=
</script>
</section>

</main> <!-- /main -->
<script type="ojs-module-contents">
eyJjb250ZW50cyI6W119
</script>
<script type="module">
if (window.location.protocol === "file:") { alert("The OJS runtime does not work with file:// URLs. Please use a web server to view this document."); }
window._ojs.paths.runtimeToDoc = "../../projects/Walking-uphill";
window._ojs.paths.runtimeToRoot = "../..";
window._ojs.paths.docToRoot = "../..";
window._ojs.selfContained = false;
window._ojs.runtime.interpretFromScriptTags();
</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "Óßã";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>